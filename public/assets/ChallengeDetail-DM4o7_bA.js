import{A,r as P,j as n,o as l,k as t,t as i,q as C,n as M,F as f,m as _,l as p,w as O,S as w,h as y,ae as R,af as T,ag as E,ah as j,K as V,a1 as B,a7 as S,O as D,R as I,ai as H,aj as N,u as z,a6 as F}from"./vendor-ynwioZzL.js";import{u as U}from"./useChallenges-qi4etzVW.js";import{u as W}from"./useLearn-BUGZ6o9q.js";import{_ as q}from"./main-DAMVmj78.js";import"./axios-DL49lHMk.js";import"./learn-oXZYQ0Gl.js";const K={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},X={class:"text-2xl font-semibold text-[var(--gry-900)]"},G={class:"mt-2 flex items-center gap-3 flex-wrap"},J={key:0,class:"text-sm text-[var(--acc-grn-600)] font-medium"},Q={class:"flex items-center gap-2 text-sm text-[var(--gry-600)]"},Y={class:"flex items-center gap-3"},Z={__name:"ProblemHeader",props:{title:String,difficulty:String,solved:Boolean,tags:{type:Array,default:()=>[]}},setup(r){const m=r,e=A(()=>{switch(m.difficulty){case"easy":return"bg-[var(--acc-grn-500)]/10 text-[var(--acc-grn-600)]";case"medium":return"bg-[var(--acc-org-500)]/10 text-[var(--acc-org-600)]";case"hard":return"bg-[var(--acc-red-500)]/10 text-[var(--acc-red-600)]";default:return"bg-[var(--gry-100)] text-[var(--gry-700)]"}});return(o,a)=>{const u=P("router-link");return l(),n("header",K,[t("div",null,[t("h1",X,i(r.title),1),t("div",G,[t("span",{class:M(["px-2 py-1 rounded-md text-xs font-medium capitalize",e.value])},i(r.difficulty),3),r.solved?(l(),n("span",J,"âœ“ Solved")):C("",!0),t("div",Q,[a[0]||(a[0]=t("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{d:"M12 2v6","stroke-width":"1.5"})],-1)),(l(!0),n(f,null,_(r.tags,c=>(l(),n("span",{key:c,class:"px-2 py-0.5 rounded-md bg-[var(--gry-100)] text-[var(--gry-700)] text-xs"},i(c),1))),128))])])]),t("div",Y,[p(u,{to:"/app/challenges"},{default:O(()=>[...a[1]||(a[1]=[t("button",{class:"px-3 py-2 rounded-md border border-[var(--card-border)] hover:bg-[var(--pri-50)] text-sm"}," Cancel ",-1)])]),_:1}),a[2]||(a[2]=t("button",{class:"px-3 py-2 rounded-md bg-[var(--pri-600)] text-white hover:bg-[var(--pri-700)] text-sm"}," Submit Solution ",-1))])])}}},tt={class:"bg-white p-4 rounded-xl border border-[var(--gry-200)] shadow-sm flex flex-wrap gap-4"},et={class:"flex items-center gap-3"},st={class:"text-sm font-semibold text-[var(--gry-900)]"},at={class:"flex items-center gap-3"},rt={class:"text-sm font-semibold text-[var(--gry-900)]"},it={class:"flex items-center gap-3"},ot={class:"text-sm font-semibold text-[var(--gry-900)]"},nt={class:"flex items-center gap-3 ml-auto text-sm text-[var(--gry-600)]"},lt={__name:"ProblemMeta",props:{meta:Object},setup(r){return(m,e)=>(l(),n("div",tt,[t("div",et,[e[0]||(e[0]=t("div",{class:"text-xs text-[var(--gry-600)]"},"XP",-1)),t("div",st,i(r.meta.xp),1)]),t("div",at,[e[1]||(e[1]=t("div",{class:"text-xs text-[var(--gry-600)]"},"Time",-1)),t("div",rt,i(r.meta.timeLimit),1)]),t("div",it,[e[2]||(e[2]=t("div",{class:"text-xs text-[var(--gry-600)]"},"Memory",-1)),t("div",ot,i(r.meta.memoryLimit),1)]),t("div",nt,[t("span",null,i(r.meta.accepted)+" / "+i(r.meta.submissions)+" accepted",1)])]))}},dt={class:"bg-white p-6 rounded-xl border border-[var(--gry-200)] shadow-sm space-y-4"},ut={class:"text-sm text-[var(--gry-700)] whitespace-pre-wrap"},ct={key:0,class:"space-y-3 mt-4"},mt={class:"text-sm"},vt={class:"text-[var(--gry-700)]"},gt={class:"text-sm"},pt={class:"text-[var(--pri-700)]"},xt={key:0,class:"text-sm text-[var(--gry-600)]"},yt={__name:"ProblemDescription",props:{body:String,examples:Array},setup(r){return(m,e)=>(l(),n("div",dt,[e[6]||(e[6]=t("h2",{class:"text-lg font-semibold text-[var(--gry-900)]"},"Problem",-1)),t("p",ut,i(r.body),1),r.examples&&r.examples.length?(l(),n("div",ct,[e[5]||(e[5]=t("h3",{class:"font-medium text-[var(--gry-900)]"},"Examples",-1)),(l(!0),n(f,null,_(r.examples,(o,a)=>(l(),n("div",{key:a,class:"p-3 border border-[var(--gry-100)] rounded-md bg-[var(--gry-50)]"},[t("div",mt,[e[0]||(e[0]=t("strong",null,"Input:",-1)),e[1]||(e[1]=w()),t("span",vt,i(o.input),1)]),t("div",gt,[e[2]||(e[2]=t("strong",null,"Output:",-1)),e[3]||(e[3]=w()),t("span",pt,i(o.output),1)]),o.explanation?(l(),n("div",xt,[e[4]||(e[4]=t("strong",null,"Explanation:",-1)),w(" "+i(o.explanation),1)])):C("",!0)]))),128))])):C("",!0)]))}},bt={class:"bg-white p-4 rounded-xl border border-[var(--gry-200)] shadow-sm space-y-3"},ft={class:"flex items-center justify-between gap-3"},_t={class:"flex items-center gap-2"},ht=["value"],$t={class:"flex items-center justify-between text-sm text-[var(--gry-600)]"},wt={__name:"CodeEditorWrapper",props:{modelValue:String,language:String,availableLangs:Array,problemMeta:{type:Object,default:()=>({memoryLimit:"--",timeLimit:"--"})}},emits:["update:modelValue","update:language","submit"],setup(r,{emit:m}){const e=r,o=m,a=y(e.modelValue||""),u=y(e.language||(e.availableLangs?e.availableLangs[0]:"javascript")),c=y(null);let v=null;const x={javascript:E(),python:T(),php:R()},h=j.updateListener.of(s=>{if(s.docChanged){const d=s.state.doc.toString();a.value=d,o("update:modelValue",d)}});function $(s){const d=x[s]||E();return[N,d,h,j.lineWrapping]}function b(s,d){v&&(v.destroy(),v=null);const g=H.create({doc:s,extensions:$(d)});v=new j({state:g,parent:c.value})}V(()=>{b(a.value,u.value)}),B(()=>{v&&v.destroy()}),S(()=>e.modelValue,s=>{v&&s!==v.state.doc.toString()&&(v.dispatch({changes:{from:0,to:v.state.doc.length,insert:s}}),a.value=s)}),S(u,s=>{o("update:language",s),b(a.value,s)}),S(()=>e.language,s=>{u.value=s},{immediate:!0});function L(){o("submit",{action:"run",code:a.value,lang:u.value})}function k(){o("submit",{action:"submit",code:a.value,lang:u.value})}return(s,d)=>(l(),n("div",bt,[t("div",ft,[t("div",_t,[d[1]||(d[1]=t("label",{class:"text-sm text-[var(--gry-600)]"},"Language",-1)),D(t("select",{"onUpdate:modelValue":d[0]||(d[0]=g=>u.value=g),class:"px-2 py-1 rounded-md border border-[var(--gry-300)] text-sm"},[(l(!0),n(f,null,_(r.availableLangs,g=>(l(),n("option",{key:g,value:g},i(g),9,ht))),128))],512),[[I,u.value]])]),t("div",{class:"flex items-center gap-2"},[t("button",{onClick:L,class:"px-3 py-1 rounded-md bg-[var(--pri-500)] text-white hover:bg-[var(--pri-600)] text-sm"},"Run"),t("button",{onClick:k,class:"px-3 py-1 rounded-md bg-[var(--acc-ind-600)] text-white hover:bg-[var(--acc-ind-500)] text-sm"},"Submit")])]),t("div",{ref_key:"editorContainer",ref:c,class:"code-editor-host"},null,512),t("div",$t,[t("div",null,"Memory: "+i(r.problemMeta.memoryLimit)+" | Time: "+i(r.problemMeta.timeLimit),1),d[2]||(d[2]=t("div",null,"Autosave",-1))])]))}},St=q(wt,[["__scopeId","data-v-17631e25"]]),Ct={class:"bg-white p-4 rounded-xl border border-[var(--gry-200)] shadow-sm"},Lt={class:"space-y-2"},kt={class:"text-sm font-medium text-[var(--gry-900)]"},jt={class:"text-xs text-[var(--gry-600)]"},Mt={class:"font-mono"},Et={class:"text-right"},At={class:"text-xs text-[var(--gry-500)]"},Vt={class:"font-mono"},Pt={__name:"TestCasesPanel",props:{cases:Array,results:Array},setup(r){const m=r;function e(o){return(m.results||[]).find(a=>a.id===o)}return(o,a)=>(l(),n("div",Ct,[a[2]||(a[2]=t("h3",{class:"text-sm font-semibold text-[var(--gry-900)] mb-3"},"Test Cases",-1)),t("ul",Lt,[(l(!0),n(f,null,_(r.cases,u=>(l(),n("li",{key:u.id,class:"flex items-center justify-between gap-3 p-3 rounded-md border border-[var(--gry-100)]"},[t("div",null,[t("div",kt,i(u.name),1),t("div",jt,[a[0]||(a[0]=w("Input: ",-1)),t("span",Mt,i(u.input),1)])]),t("div",Et,[e(u.id)?(l(),n("div",{key:0,class:M(["text-sm font-semibold",e(u.id).status==="Passed"?"text-[var(--acc-grn-600)]":"text-[var(--acc-red-600)]"])},i(e(u.id).status),3)):C("",!0),t("div",At,[a[1]||(a[1]=w("Expected: ",-1)),t("span",Vt,i(u.expected_output),1)])])]))),128))])]))}},Ot={class:"bg-white p-4 rounded-xl border border-[var(--gry-200)] shadow-sm"},Rt={class:"space-y-2"},Tt={class:"text-sm"},Bt={class:"font-medium text-[var(--gry-900)]"},Dt={class:"text-xs text-[var(--gry-600)]"},It={class:"text-right"},Ht={class:"text-xs text-[var(--gry-500)]"},Nt={__name:"SubmissionsList",props:{submissions:Object},setup(r){function m(e){if(!e)return"text-[var(--gry-700)]";const o=e.toLowerCase();return o.includes("accept")?"text-[var(--acc-grn-600)]":o.includes("wrong")?"text-[var(--acc-red-600)]":"text-[var(--gry-700)]"}return(e,o)=>(l(),n("div",Ot,[o[0]||(o[0]=t("h3",{class:"text-sm font-semibold text-[var(--gry-900)] mb-3"},"Recent Submissions",-1)),t("ul",Rt,[(l(!0),n(f,null,_(r.submissions,a=>(l(),n("li",{key:a.id,class:"flex items-center justify-between gap-3 p-3 rounded-md border border-[var(--gry-100)]"},[t("div",Tt,[t("div",Bt,"#"+i(a.id)+" \\u2014 "+i(a.lang),1),t("div",Dt,i(a.date),1)]),t("div",It,[t("div",{class:M([m(a.status),"font-semibold text-sm"])},i(a.status),3),t("div",Ht,i(a.time),1)])]))),128))])]))}},zt={class:"bg-white p-4 rounded-xl border border-[var(--gry-200)] shadow-sm"},Ft={class:"space-y-2"},Ut={class:"cursor-pointer text-sm text-[var(--gry-800)] font-medium"},Wt={class:"mt-2 text-sm text-[var(--gry-600)]"},qt={__name:"HintsPanel",props:{hints:Array},setup(r){return(m,e)=>(l(),n("div",zt,[e[0]||(e[0]=t("h3",{class:"text-sm font-semibold text-[var(--gry-900)] mb-3"},"Hints",-1)),t("ul",Ft,[(l(!0),n(f,null,_(r.hints,(o,a)=>(l(),n("li",{key:a,class:"p-3 rounded-md border border-[var(--gry-100)] bg-[var(--gry-50)]"},[t("details",null,[t("summary",Ut,"Hint "+i(a+1),1),t("p",Wt,i(o),1)])]))),128))])]))}},Kt={class:"p-6 space-y-6"},Xt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Gt={class:"lg:col-span-2 space-y-6"},Jt={class:"space-y-6"},ae={__name:"ChallengeDetail",setup(r){const m=z(),e=m.params.slug||m.params.id,{languages:o,fetchLanguages:a}=W(),{fetchChallenge:u}=U(),c=F({id:null,slug:"",title:"",difficulty:"",solved:!1,tags:[],meta:{xp:0,timeLimit:"1s",memoryLimit:"64MB",submissions:0,accepted:0},body:"",examples:[],hints:[],testcases:[]}),v=A(()=>Array.isArray(o.value)?o.value.map(s=>s.slug):[]),x=y(""),h=y(""),$=y([]),b=y([]);S(v,s=>{s.length>0&&!x.value&&(x.value=s[0],L())});const L=()=>{h.value=`// write your ${x.value} solution here`},k=({action:s="run"}={})=>{$.value=c.testcases.map(d=>({id:d.id,name:d.name,status:"Running",details:""})),setTimeout(()=>{$.value=c.testcases.map(d=>({id:d.id,name:d.name,status:"Passed",details:`Expected ${d.expected}`})),s==="submit"&&b.value.unshift({id:Math.floor(Math.random()*1e4),lang:x.value,status:"Accepted",time:`${Math.floor(Math.random()*100)+20}ms`,date:new Date().toISOString().slice(0,10)})},700)};return V(async()=>{await a();const s=await u(e);s&&(Object.assign(c,{id:s.id,slug:s.slug,title:s.title,difficulty:s.difficulty,solved:s.solved,tags:s.tags,meta:{xp:s.xp_reward,timeLimit:s.time_limit,memoryLimit:s.memory_limit,submissions:s.total_submissions,accepted:s.accepted_submissions},body:s.description,examples:s.examples,hints:s.hints,testcases:s.testcases}),b.value=s.submissions||[])}),(s,d)=>(l(),n("div",Kt,[p(Z,{title:c.title,difficulty:c.difficulty,solved:c.solved,tags:c.tags},null,8,["title","difficulty","solved","tags"]),t("div",Xt,[t("div",Gt,[p(lt,{meta:c.meta},null,8,["meta"]),p(yt,{body:c.body,examples:c.examples},null,8,["body","examples"]),p(qt,{hints:c.hints},null,8,["hints"])]),t("aside",Jt,[p(St,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=g=>h.value=g),language:x.value,"available-langs":v.value,onSubmit:k},null,8,["modelValue","language","available-langs"]),p(Pt,{cases:c.testcases,results:$.value},null,8,["cases","results"]),p(Nt,{submissions:b.value},null,8,["submissions"])])])]))}};export{ae as default};
